<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SCP Foundation Secure Terminal</title>
  <link rel="stylesheet" href="/style.css" />
</head>

<body>
  <!-- SCP BOOT SCREEN -->
  <div id="boot" class="boot-screen" aria-label="Boot screen">
    <pre id="boot-text"></pre>
  </div>

  <!-- TERMINAL -->
  <main class="terminal hidden" id="terminal" role="main" aria-label="SCP Application Terminal">
    <header class="topbar">
      <div class="lights" aria-hidden="true">
        <span class="dot red"></span>
        <span class="dot yellow"></span>
        <span class="dot green"></span>
      </div>
      <div class="title">scp.foundation :: leadership_application</div>
    </header>

    <section class="screen">
      <div class="output" id="term-log" aria-live="polite">
        <p><span class="prompt">scp@foundation</span>:<span class="path">~/applications</span> access_granted</p>
        <p class="muted">Leadership application interface loaded.</p>
        <p class="muted" id="step-line">Page 1/6 — OOC INFORMATION</p>
        <p>---</p>
      </div>

      <!-- SINGLE FORM, MULTI-STEP UI -->
      <form
        class="form"
        method="POST"
        action="/api/forms/scp-leadership"
        id="app-form"
      >
        <!-- Progress -->
        <div class="progress-wrap" aria-label="Form progress">
          <div class="progress-bar" id="progress-bar" style="width: 0%"></div>
        </div>

        <!-- STEP 1 -->
        <fieldset class="step" data-title="OOC INFORMATION">
          <legend>OOC INFORMATION</legend>

          <label class="field">
            <span class="label">OOC Name</span>
            <input name="ooc_name" required />
          </label>

          <label class="field">
            <span class="label">Discord Username</span>
            <input name="discord_username" required />
          </label>

          <label class="field">
            <span class="label">Steam ID</span>
            <input name="steam_id" required />
          </label>

          <label class="field">
            <span class="label">Timezone</span>
            <input name="timezone" required />
          </label>

          <label class="field">
            <span class="label">Age</span>
            <input type="number" name="ooc_age" min="13" required />
          </label>

          <label class="field">
            <span class="label">Average Activity</span>
            <input name="average_activity" placeholder="e.g. hours per week" required />
          </label>
        </fieldset>

        <!-- STEP 2 -->
        <fieldset class="step" data-title="APPLICANT INFORMATION">
          <legend>APPLICANT INFORMATION</legend>

          <label class="field">
            <span class="label">Name</span>
            <input name="ic_name" required />
          </label>

          <label class="field">
            <span class="label">Age</span>
            <input type="number" name="ic_age" required />
          </label>

          <label class="field">
            <span class="label">Clearance Level (If Applicable)</span>
            <input name="clearance_level" />
          </label>

          <label class="field">
            <span class="label">Current employment</span>
            <input name="current_employment" />
          </label>

          <label class="field">
            <span class="label">Background</span>
            <textarea name="background" required></textarea>
          </label>
        </fieldset>

        <!-- STEP 3 -->
        <fieldset class="step" data-title="APPLICATION INFORMATION">
          <legend>APPLICATION INFORMATION</legend>

          <label class="field">
            <span class="label">Department</span>
            <select name="department" required>
              <option disabled selected value="">-- select --</option>
              <option>Site 44 Administration</option>
              <option>Security Department</option>
              <option>Research Department</option>
              <option>Support Services Department</option>
              <option>Other</option>
            </select>
          </label>

          <label class="field">
            <span class="label">Position</span>
            <input name="position" required />
          </label>

          <label class="field">
            <span class="label">Why are you applying for this leadership role?</span>
            <textarea name="why_leadership" required></textarea>
          </label>
        </fieldset>

        <!-- STEP 4 -->
        <fieldset class="step" data-title="EXPERIENCE">
          <legend>EXPERIENCE</legend>

          <label class="field">
            <span class="label">Amount of Hours of Garry’s Mod</span>
            <input name="gmod_hours" />
          </label>

          <label class="field">
            <span class="label">Total SCPRP Experience</span>
            <textarea name="scprp_experience" required></textarea>
          </label>

          <label class="field">
            <span class="label">Previous Leadership Experience</span>
            <textarea name="leadership_experience"></textarea>
          </label>
        </fieldset>

        <!-- STEP 5 -->
        <fieldset class="step" data-title="FOUNDATION INFORMATION">
          <legend>FOUNDATION INFORMATION</legend>

          <label class="field">
            <span class="label">Describe your understanding of the SCP Foundation’s mission and structure</span>
            <textarea name="foundation_understanding" required></textarea>
          </label>

          <label class="field">
            <span class="label">How does your chosen role fit into the Foundation hierarchy?</span>
            <textarea name="hierarchy_fit" required></textarea>
          </label>

          <label class="field">
            <span class="label">How familiar are you with Regulations and Guidelines (Lore) relevant to this position?</span>
            <textarea name="lore_familiarity" required></textarea>
          </label>
        </fieldset>

        <!-- STEP 6 -->
        <fieldset class="step" data-title="LEADERSHIP + RULES">
          <legend>LEADERSHIP</legend>

          <label class="field">
            <span class="label">How would you describe your leadership style?</span>
            <textarea name="leadership_style" required></textarea>
          </label>

          <label class="field">
            <span class="label">How would you handle conflicts between Foundation Personnel?</span>
            <textarea name="conflict_handling" required></textarea>
          </label>

          <legend style="margin-top:14px;">RULES & EXPECTATIONS</legend>

          <label class="field">
            <span class="label">Have you read and understood the server rules? (Yes/No)</span>
            <select name="rules_acknowledged" required>
              <option disabled selected value="">-- select --</option>
              <option>Yes</option>
              <option>No</option>
            </select>
          </label>
        </fieldset>

        <!-- Navigation -->
        <div class="pager">
          <button type="button" class="btn ghost" id="prevBtn">Back</button>
          <div class="pager-mid muted" id="pagerMid">Page 1 of 6</div>
          <button type="button" class="btn" id="nextBtn">Next</button>
          <button type="submit" class="btn hidden" id="submitBtn">Submit to Site Administration</button>
          <button type="reset" class="btn ghost" id="resetBtn">Clear Form</button>
        </div>

        <p class="hint">All responses are logged and reviewed by Site Administration.</p>
      </form>
    </section>

    <footer class="footer">
      <span class="muted">status:</span> awaiting_review • <span class="muted">site:</span> 44
    </footer>
  </main>

  <script>
    // Boot
    const bootLines = [
      "SCP FOUNDATION SECURE BIOS v4.██",
      "© SCP Foundation",
      "",
      "Initializing Site-44 leadership interface ... [ OK ]",
      "Verifying administrative permissions ...... [ OK ]",
      "Loading personnel vetting modules ........ [ OK ]",
      "",
      "WARNING: This system is monitored.",
      "",
      "Boot sequence complete.",
      "Transferring control to application shell...",
      ""
    ];

    const bootText = document.getElementById("boot-text");
    const bootScreen = document.getElementById("boot");
    const terminal = document.getElementById("terminal");

    let i = 0;
    function boot() {
      if (i < bootLines.length) {
        bootText.textContent += bootLines[i++] + "\n";
        setTimeout(boot, 220);
      } else {
        setTimeout(() => {
          bootScreen.classList.add("fade-out");
          setTimeout(() => {
            bootScreen.remove();
            terminal.classList.remove("hidden");
            initPager();
          }, 600);
        }, 800);
      }
    }
    boot();

    // Pager logic
    function initPager() {
      const form = document.getElementById("app-form");
      const steps = Array.from(document.querySelectorAll(".step"));
      const prevBtn = document.getElementById("prevBtn");
      const nextBtn = document.getElementById("nextBtn");
      const submitBtn = document.getElementById("submitBtn");
      const resetBtn = document.getElementById("resetBtn");

      const stepLine = document.getElementById("step-line");
      const pagerMid = document.getElementById("pagerMid");
      const progressBar = document.getElementById("progress-bar");
      const termLog = document.getElementById("term-log");

      let idx = 0;

      // Severity log (UI only)
      function log(msg, level = "INFO") {
        const row = document.createElement("p");
        row.className = "logline";

        const badge = document.createElement("span");
        badge.className = "badge " + level.toLowerCase();
        badge.textContent = level;

        const text = document.createElement("span");
        text.className = "log-msg";
        text.textContent = msg;

        row.appendChild(badge);
        row.appendChild(text);
        termLog.appendChild(row);
        termLog.scrollTop = termLog.scrollHeight;
      }

      function setStep(n) {
        idx = Math.max(0, Math.min(n, steps.length - 1));
        steps.forEach((s, k) => s.classList.toggle("active", k === idx));

        const title = steps[idx].dataset.title || `Page ${idx + 1}`;
        stepLine.textContent = `Page ${idx + 1}/${steps.length} — ${title}`;
        pagerMid.textContent = `Page ${idx + 1} of ${steps.length}`;

        const pct = Math.round(((idx) / (steps.length - 1)) * 100);
        progressBar.style.width = `${pct}%`;

        prevBtn.disabled = idx === 0;

        const onLast = idx === steps.length - 1;
        nextBtn.classList.toggle("hidden", onLast);
        submitBtn.classList.toggle("hidden", !onLast);

        const first = steps[idx].querySelector("input, select, textarea");
        if (first) first.focus({ preventScroll: false });

        log(`navigating: ${title}`, "INFO");
        window.scrollTo({ top: 0, behavior: "smooth" });
      }

      function validateCurrentStep() {
        const current = steps[idx];
        const fields = Array.from(current.querySelectorAll("input, select, textarea"));
        for (const el of fields) {
          if (!el.checkValidity()) {
            el.reportValidity();
            return false;
          }
        }
        return true;
      }

      prevBtn.addEventListener("click", () => setStep(idx - 1));

      nextBtn.addEventListener("click", () => {
        if (!validateCurrentStep()) {
          log("validation failed: complete required fields on this page", "WARN");
          return;
        }
        setStep(idx + 1);
      });

      resetBtn.addEventListener("click", () => {
        setTimeout(() => setStep(0), 0);
        log("form reset", "INFO");
      });

      // Prevent submit unless last page is visible
      form.addEventListener("submit", (e) => {
        if (idx !== steps.length - 1) {
          e.preventDefault();
          log("submit blocked: navigate to final page to submit", "WARN");
          setStep(steps.length - 1);
          return;
        }
        if (!validateCurrentStep()) {
          e.preventDefault();
          log("validation failed: complete required fields on final page", "ERROR");
        }
      });

      // Keyboard helpers: Enter to go next (except textarea), Ctrl+Enter to submit on last
      form.addEventListener("keydown", (e) => {
        const tag = (e.target && e.target.tagName) ? e.target.tagName.toLowerCase() : "";
        const isTextarea = tag === "textarea";

        if (e.key === "Enter" && !isTextarea) {
          e.preventDefault();
          if (idx === steps.length - 1) {
            submitBtn.click();
          } else {
            nextBtn.click();
          }
        }

        if ((e.ctrlKey || e.metaKey) && e.key === "Enter") {
          if (idx === steps.length - 1) submitBtn.click();
        }
      });

      setStep(0);
    }
  </script>
</body>
</html>





